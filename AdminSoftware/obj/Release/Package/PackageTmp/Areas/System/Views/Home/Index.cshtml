@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="panel panel-default">
    <div class="panel-heading">Công việc nhóm cần duyệt</div>
    <div class="panel-body">
        <div class="row">
            <div class="col-md-12">
                <div id="grdMain"></div>
            </div>
        </div>
    </div>
</div>
@section scripts
{
    <script type="text/javascript">
        var users= @Html.Raw(Json.Encode(ViewBag.Users));
        var record = 0;
        $(document).ready(function() {
            $("#grdMain").kendoGrid({
                dataSource: {
                    transport: {
                        read: '/system/Home/WorkStreams',
                        dataType: "json"
                    },
                    schema: {
                        model: {
                            id: "WorkStreamId",
                            fields: {
                                CreateDate: { type: 'date' },
                                FromDate: { type: 'date' },
                                ToDate: { type: 'date' }
                            }
                        }
                    },
                    pageSize: 100,
                    serverPaging: false,
                    serverFiltering: false
                },
                height: gridHeight,
                filterable: false,
                sortable: true,
                pageable: false,
                selectable: 'row',
                columns: [
                    {
                        title: "STT",
                        template: "#= ++record #",
                        width: 60
                    },
                      {
                          field: "WorkStreamCode",
                          title: "Mã VN",
                          width: 140
                      },
                       {
                           field: "CreateBy",
                           title: "Người tạo",
                           width: 140,
                           values:users
                       },
                    {
                        field: "FromDate",
                        title: "Thời gian bắt đầu",
                        width: 180,
                        format: "{0:dd/MM/yyyy}"

                    },
                    {
                        field: "ToDate",
                        title: "Thời gian hoàn thành",
                        width: 180,
                        format: "{0:dd/MM/yyyy}"
                    },
                    {
                        field: "CreateDate",
                        title: "Ngày tạo",
                        width: 120,
                        format: "{0:dd/MM/yyyy}"
                    },
                    {
                        field: "Description",
                        title: "Mô tả",
                        width: 300
                    }


                ],
                dataBinding: function () {
                    record = (this.dataSource.page() - 1) * this.dataSource.pageSize();
                }
            });
        });
    </script>
}

